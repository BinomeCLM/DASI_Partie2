<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <!-- mettre un lien vers le fichier js -->
    </head>
    <body>
        <h1>S'inscrire</h1>
        <div id="msgErreur"></div>
        <form method="POST">
            <label for="civilite">Civilit√©</label>
            <select name="civilite" id="civilite">
                <option value="monsieur">Monsieur</option>
                <option value="Madame">Madame</option>
            </select>
            </br>
            <label for="prenom">Prenom</label>
            <input type="text" name="prenom" id="prenom"/>
            </br>
            <label for="nom">Nom</label>
            <input type="text" name="nom" id="nom"/>
            </br>
            <label for="dateNaissance">Date de naissance</label>
            <input type="text" name="dateNaissance" id="dateNaissance"/>
            </br>
            <label for="adresse">Adresse postale</label>
            <input type="text" name="adresse" id="adresse"/>
            </br>
            <label for="telephone">Telephone</label>
            <input type="text" name="telephone" id="telephone"/>
            </br>
            <label for="mail">Courriel</label>
            <input type="text" name="mail" id="mail"/>
            </br>
            <input id="validerForm" type="button" value="Confirmer inscription" />
        </form>
        <script>
            $(document).ready(function () {
                // ajout d'un "handler" sur le clic du bouton de Confirmer Inscription
                $('#validerForm').on('click', function () {
                    // affichage pour debugage dans la console javascript du navigateur
                    console.log('Click sur le bouton "Confirmer inscription"');
                    inscription();
                });
            });
            
            function inscription() {
                $.ajax({
                    url:'./ActionServlet',
                    type:'POST',
                    data: {
                        action:'ConfirmationInscription',
                        civilite: $('civilite option:selected').text(),
                        nom: $('#nom').val(),
                        prenom: $('#prenom').val(),
                        dateNaissance: $('#dateNaissance').val(),
                        telephone: $('#telephone').val(),
                        mail: $('#mail').val(),
                        adresse: $('#adresse').val()
                    },
                    dataType:'text'
                })
                .done(function(data){
                    alert(data);
                    if (data){
                        window.location="confEnvoieMail.html";
                    }
                    else {
                        alert('done_erreur');
                        $('#msgErreur').html("Erreur lors de l'inscription");
                    }
                });
            };
            
        </script>
    </body>
</html>
